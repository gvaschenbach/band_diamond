
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{4\_class\_project}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Project: Section 4 \textbar{} Classification \textbar{}
Creditworthiness}\label{project-section-4-classification-creditworthiness}

    \subsection{Course: Business Analyst
Nanodegree}\label{course-business-analyst-nanodegree}

\subsection{Student: Peter Jones}\label{student-peter-jones}

\subsection{Date: 2018.04.09}\label{date-2018.04.09}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \subsection{Step 1: Business
understanding}\label{step-1-business-understanding}

    \subsubsection{What decision needs to be
made?}\label{what-decision-needs-to-be-made}

The decision to be made here is to determine if a loan applicant is
trustworthy or not.

    \subsubsection{What data is needed to make this
decision?}\label{what-data-is-needed-to-make-this-decision}

To build a model to assist in making this decision, data is needed on as
many past loan approvals as possible, with as mmuch data on the
customers as is feasible to collect and the outcome of whether the
customer ended up being creditworthy or not.

    \subsubsection{What kind of model (Continuous, Binary, Non-Binary,
Time-Series) do we need to use to help make these
decisions?}\label{what-kind-of-model-continuous-binary-non-binary-time-series-do-we-need-to-use-to-help-make-these-decisions}

The outcome variable for these data is a binary value of creditworthy or
not, so we would create binary models to help make this decision.

    \subsection{Step 2: Building the training
set}\label{step-2-building-the-training-set}

    \subsubsection{Libraries}\label{libraries}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{library}\PY{p}{(} tidyverse \PY{p}{)}
        \PY{k+kn}{require}\PY{p}{(} PerformanceAnalytics \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} caret \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} Amelia \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(}randomForest\PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} rpart \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} rpart.plot \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} reprtree \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} reshape2 \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} gbm \PY{p}{)}
        \PY{k+kn}{library}\PY{p}{(} pROC \PY{p}{)}
        
        \PY{k+kp}{options}\PY{p}{(}jupyter.plot\PYZus{}mimetypes \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{text/plain\PYZdq{}}\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{image/png\PYZdq{}} \PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
── Attaching packages ─────────────────────────────────────── tidyverse 1.2.1 ──
✔ ggplot2 2.2.1     ✔ purrr   0.2.4
✔ tibble  1.3.4     ✔ dplyr   0.7.4
✔ tidyr   0.7.2     ✔ stringr 1.2.0
✔ readr   1.1.1     ✔ forcats 0.2.0
── Conflicts ────────────────────────────────────────── tidyverse\_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
Loading required package: PerformanceAnalytics
Loading required package: xts
Loading required package: zoo

Attaching package: ‘zoo’

The following objects are masked from ‘package:base’:

    as.Date, as.Date.numeric


Attaching package: ‘xts’

The following objects are masked from ‘package:dplyr’:

    first, last


Attaching package: ‘PerformanceAnalytics’

The following object is masked from ‘package:graphics’:

    legend

Loading required package: lattice

Attaching package: ‘caret’

The following object is masked from ‘package:purrr’:

    lift

Loading required package: Rcpp
\#\# 
\#\# Amelia II: Multiple Imputation
\#\# (Version 1.7.4, built: 2015-12-05)
\#\# Copyright (C) 2005-2018 James Honaker, Gary King and Matthew Blackwell
\#\# Refer to http://gking.harvard.edu/amelia/ for more information
\#\# 
Warning message:
“package ‘randomForest’ was built under R version 3.4.4”randomForest 4.6-14
Type rfNews() to see new features/changes/bug fixes.

Attaching package: ‘randomForest’

The following object is masked from ‘package:dplyr’:

    combine

The following object is masked from ‘package:ggplot2’:

    margin

Loading required package: tree
Warning message:
“package ‘tree’ was built under R version 3.4.4”Loading required package: plotrix

Attaching package: ‘reshape2’

The following object is masked from ‘package:tidyr’:

    smiths

Loading required package: survival

Attaching package: ‘survival’

The following object is masked from ‘package:caret’:

    cluster

Loading required package: splines
Loading required package: parallel
Loaded gbm 2.1.3
Type 'citation("pROC")' for a citation.

Attaching package: ‘pROC’

The following objects are masked from ‘package:stats’:

    cov, smooth, var


    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} df.train.raw \PY{o}{\PYZlt{}\PYZhy{}} readxl\PY{o}{::}read\PYZus{}excel\PY{p}{(} \PY{l+s}{\PYZsq{}}\PY{l+s}{../data/4\PYZus{}class/credit\PYZhy{}data\PYZhy{}training.xlsx\PYZsq{}} \PY{p}{)}
        df.test.raw \PY{o}{\PYZlt{}\PYZhy{}} readxl\PY{o}{::}read\PYZus{}excel\PY{p}{(} \PY{l+s}{\PYZsq{}}\PY{l+s}{../data/4\PYZus{}class/customers\PYZhy{}to\PYZhy{}score.xlsx\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{k+kp}{names}\PY{p}{(} df.train.raw \PY{p}{)} \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZdq{}}\PY{l+s}{application\PYZus{}result\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{acct\PYZus{}balance\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{months\PYZus{}of\PYZus{}credit\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{prev\PYZus{}payment\PYZus{}status\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{purpose\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{credit\PYZus{}amt\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{savings\PYZus{}stocks\PYZus{}val\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{curr\PYZus{}employment\PYZus{}length\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{installment\PYZus{}perc\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{guarantors\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{curr\PYZus{}address\PYZus{}dur\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{most\PYZus{}val\PYZus{}asset\PYZus{}cd\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{age\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{concurrent\PYZus{}credits\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{apartment\PYZus{}type\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{credits\PYZus{}at\PYZus{}bank\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{occupation\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{dependents\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{telephone\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{foreign\PYZus{}worker\PYZus{}flg\PYZdq{}} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} df.train.raw \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{transform}\PY{p}{(}  df.train.raw
                                  \PY{p}{,} application\PYZus{}result\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} application\PYZus{}result\PYZus{}txt \PY{p}{)} 
                                  \PY{p}{,} acct\PYZus{}balance\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} acct\PYZus{}balance\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} months\PYZus{}of\PYZus{}credit\PYZus{}no \PY{o}{=} months\PYZus{}of\PYZus{}credit\PYZus{}no
                                  \PY{p}{,} prev\PYZus{}payment\PYZus{}status\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} prev\PYZus{}payment\PYZus{}status\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} purpose\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} purpose\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} credit\PYZus{}amt\PYZus{}no \PY{o}{=} credit\PYZus{}amt\PYZus{}no
                                  \PY{p}{,} savings\PYZus{}stocks\PYZus{}val\PYZus{}no \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} savings\PYZus{}stocks\PYZus{}val\PYZus{}no \PY{p}{)}
                                  \PY{p}{,} curr\PYZus{}employment\PYZus{}length\PYZus{}no \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} curr\PYZus{}employment\PYZus{}length\PYZus{}no \PY{p}{)}
                                  \PY{p}{,} installment\PYZus{}perc\PYZus{}no \PY{o}{=} installment\PYZus{}perc\PYZus{}no
                                  \PY{p}{,} guarantors\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} guarantors\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} curr\PYZus{}address\PYZus{}dur\PYZus{}no \PY{o}{=} curr\PYZus{}address\PYZus{}dur\PYZus{}no
                                  \PY{p}{,} most\PYZus{}val\PYZus{}asset\PYZus{}cd \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} most\PYZus{}val\PYZus{}asset\PYZus{}cd \PY{p}{)}
                                  \PY{p}{,} age\PYZus{}no \PY{o}{=} age\PYZus{}no
                                  \PY{p}{,} concurrent\PYZus{}credits\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} concurrent\PYZus{}credits\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} apartment\PYZus{}type\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} apartment\PYZus{}type\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} credits\PYZus{}at\PYZus{}bank\PYZus{}no \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} credits\PYZus{}at\PYZus{}bank\PYZus{}no \PY{p}{)}
                                  \PY{p}{,} occupation\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} occupation\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} dependents\PYZus{}no \PY{o}{=} dependents\PYZus{}no
                                  \PY{p}{,} telephone\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} telephone\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} foreign\PYZus{}worker\PYZus{}flg \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} foreign\PYZus{}worker\PYZus{}flg \PY{p}{)}
                                 \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} facvar \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZdq{}}\PY{l+s}{application\PYZus{}result\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{acct\PYZus{}balance\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{prev\PYZus{}payment\PYZus{}status\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{purpose\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{savings\PYZus{}stocks\PYZus{}val\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{curr\PYZus{}employment\PYZus{}length\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{guarantors\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{most\PYZus{}val\PYZus{}asset\PYZus{}cd\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{concurrent\PYZus{}credits\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{apartment\PYZus{}type\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{credits\PYZus{}at\PYZus{}bank\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{occupation\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{telephone\PYZus{}txt\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{foreign\PYZus{}worker\PYZus{}flg\PYZdq{}} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} convar \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZdq{}}\PY{l+s}{months\PYZus{}of\PYZus{}credit\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{credit\PYZus{}amt\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{installment\PYZus{}perc\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{curr\PYZus{}address\PYZus{}dur\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{age\PYZus{}no\PYZdq{}}
                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{dependents\PYZus{}no\PYZdq{}} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{k+kp}{names}\PY{p}{(} df.test.raw \PY{p}{)} \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(}   \PY{l+s}{\PYZdq{}}\PY{l+s}{acct\PYZus{}balance\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{months\PYZus{}of\PYZus{}credit\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{prev\PYZus{}payment\PYZus{}status\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{purpose\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{credit\PYZus{}amt\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{savings\PYZus{}stocks\PYZus{}val\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{curr\PYZus{}employment\PYZus{}length\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{installment\PYZus{}perc\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{guarantors\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{curr\PYZus{}address\PYZus{}dur\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{most\PYZus{}val\PYZus{}asset\PYZus{}cd\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{age\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{concurrent\PYZus{}credits\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{apartment\PYZus{}type\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{credits\PYZus{}at\PYZus{}bank\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{occupation\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{dependents\PYZus{}no\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{telephone\PYZus{}txt\PYZdq{}}
                                   \PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{foreign\PYZus{}worker\PYZus{}flg\PYZdq{}} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} df.test.raw \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{transform}\PY{p}{(}  df.test.raw
                                  \PY{p}{,} acct\PYZus{}balance\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} acct\PYZus{}balance\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} months\PYZus{}of\PYZus{}credit\PYZus{}no \PY{o}{=} months\PYZus{}of\PYZus{}credit\PYZus{}no
                                  \PY{p}{,} prev\PYZus{}payment\PYZus{}status\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} prev\PYZus{}payment\PYZus{}status\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} purpose\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} purpose\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} credit\PYZus{}amt\PYZus{}no \PY{o}{=} credit\PYZus{}amt\PYZus{}no
                                  \PY{p}{,} savings\PYZus{}stocks\PYZus{}val\PYZus{}no \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} savings\PYZus{}stocks\PYZus{}val\PYZus{}no \PY{p}{)}
                                  \PY{p}{,} curr\PYZus{}employment\PYZus{}length\PYZus{}no \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} curr\PYZus{}employment\PYZus{}length\PYZus{}no \PY{p}{)}
                                  \PY{p}{,} installment\PYZus{}perc\PYZus{}no \PY{o}{=} installment\PYZus{}perc\PYZus{}no
                                  \PY{p}{,} guarantors\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} guarantors\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} curr\PYZus{}address\PYZus{}dur\PYZus{}no \PY{o}{=} curr\PYZus{}address\PYZus{}dur\PYZus{}no
                                  \PY{p}{,} most\PYZus{}val\PYZus{}asset\PYZus{}cd \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} most\PYZus{}val\PYZus{}asset\PYZus{}cd \PY{p}{)}
                                  \PY{p}{,} age\PYZus{}no \PY{o}{=} age\PYZus{}no
                                  \PY{p}{,} concurrent\PYZus{}credits\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} concurrent\PYZus{}credits\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} apartment\PYZus{}type\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} apartment\PYZus{}type\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} credits\PYZus{}at\PYZus{}bank\PYZus{}no \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} credits\PYZus{}at\PYZus{}bank\PYZus{}no \PY{p}{)}
                                  \PY{p}{,} occupation\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} occupation\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} dependents\PYZus{}no \PY{o}{=} dependents\PYZus{}no
                                  \PY{p}{,} telephone\PYZus{}txt \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} telephone\PYZus{}txt \PY{p}{)}
                                  \PY{p}{,} foreign\PYZus{}worker\PYZus{}flg \PY{o}{=} \PY{k+kp}{factor}\PY{p}{(} foreign\PYZus{}worker\PYZus{}flg \PY{p}{)}
                                 \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} ggplot\PY{p}{(} df.train.raw\PY{p}{,} aes\PY{p}{(} x \PY{o}{=} application\PYZus{}result\PYZus{}txt \PY{p}{)} \PY{p}{)} \PY{o}{+}
            geom\PYZus{}bar\PY{p}{(} \PY{p}{)} \PY{o}{+}
            theme\PYZus{}classic\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_17_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsubsection{Are any of your numerical data fields highly-correlated
with each
other?}\label{are-any-of-your-numerical-data-fields-highly-correlated-with-each-other}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} chart.Correlation\PY{p}{(} df.train.raw\PY{p}{[}\PY{p}{,}convar\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_19_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \paragraph{No variables reach the .7 threshold of being highly
correlated, so all
retained.}\label{no-variables-reach-the-.7-threshold-of-being-highly-correlated-so-all-retained.}

    \subsubsection{Are there any missing data for each of the data
fields?}\label{are-there-any-missing-data-for-each-of-the-data-fields}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} missmap\PY{p}{(} df.train.raw \PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_22_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \paragraph{Removing address\_dur\_no due to
missingness.}\label{removing-address_dur_no-due-to-missingness.}

    \paragraph{Impute missing values for age\_no as
median}\label{impute-missing-values-for-age_no-as-median}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} df.train.raw\PY{p}{[}\PY{k+kp}{is.na}\PY{p}{(} df.train.raw\PY{o}{\PYZdl{}}age\PYZus{}no \PY{p}{)}\PY{p}{,}\PY{p}{]}\PY{o}{\PYZdl{}}age\PYZus{}no \PY{o}{\PYZlt{}\PYZhy{}} median\PY{p}{(} df.train.raw\PY{o}{\PYZdl{}}age\PYZus{}no\PY{p}{,} na.rm \PY{o}{=} \PY{k+kc}{TRUE} \PY{p}{)}
\end{Verbatim}


    \subsubsection{Are there only a few values in a subset of your data
field? Does the data field look very uniform (there is only one value
for the entire
field?).}\label{are-there-only-a-few-values-in-a-subset-of-your-data-field-does-the-data-field-look-very-uniform-there-is-only-one-value-for-the-entire-field.}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} fac.check \PY{o}{\PYZlt{}\PYZhy{}} melt\PY{p}{(} df.train.raw\PY{p}{[}\PY{p}{,}facvar\PY{p}{]}\PY{p}{,} \PY{l+m}{1} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Warning message:
“attributes are not identical across measure variables; they will be dropped”
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} ggplot\PY{p}{(} fac.check\PY{p}{,} aes\PY{p}{(} x \PY{o}{=} value \PY{p}{)} \PY{p}{)} \PY{o}{+}
             geom\PYZus{}bar\PY{p}{(}\PY{p}{)} \PY{o}{+}
             facet\PYZus{}wrap\PY{p}{(} \PY{o}{\PYZti{}}variable\PY{p}{,} scales \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{free\PYZus{}x\PYZdq{}} \PY{p}{)} \PY{o}{+}
             theme\PYZus{}classic\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_28_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} str\PY{p}{(} df.train.raw \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
'data.frame':	500 obs. of  20 variables:
 \$ application\_result\_txt   : Factor w/ 2 levels "Creditworthy",..: 1 1 1 1 1 1 2 1 1 1 {\ldots}
 \$ acct\_balance\_txt         : Factor w/ 2 levels "No Account","Some Balance": 2 2 2 2 1 2 1 1 1 2 {\ldots}
 \$ months\_of\_credit\_no      : num  4 4 4 4 6 6 6 6 6 6 {\ldots}
 \$ prev\_payment\_status\_txt  : Factor w/ 3 levels "No Problems (in this bank)",..: 2 2 1 1 2 1 3 2 2 2 {\ldots}
 \$ purpose\_txt              : Factor w/ 4 levels "Home Related",..: 3 1 1 1 1 1 1 1 1 1 {\ldots}
 \$ credit\_amt\_no            : num  1494 1494 1544 3380 343 {\ldots}
 \$ savings\_stocks\_val\_no    : Factor w/ 3 levels "< £100","£100-£1000",..: 2 2 3 3 3 1 2 3 3 2 {\ldots}
 \$ curr\_employment\_length\_no: Factor w/ 3 levels "< 1yr","1-4 yrs",..: 1 1 2 2 1 1 1 1 2 2 {\ldots}
 \$ installment\_perc\_no      : num  1 1 2 1 4 4 4 3 3 2 {\ldots}
 \$ guarantors\_txt           : Factor w/ 2 levels "None","Yes": 1 1 1 1 1 1 1 1 2 1 {\ldots}
 \$ curr\_address\_dur\_no      : num  2 2 1 1 1 NA NA NA 3 4 {\ldots}
 \$ most\_val\_asset\_cd        : Factor w/ 4 levels "1","2","3","4": 1 1 1 1 1 3 2 2 1 1 {\ldots}
 \$ age\_no                   : num  33 29 42 37 27 52 24 22 28 23 {\ldots}
 \$ concurrent\_credits\_txt   : Factor w/ 1 level "Other Banks/Depts": 1 1 1 1 1 1 1 1 1 1 {\ldots}
 \$ apartment\_type\_txt       : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 1 2 2 1 {\ldots}
 \$ credits\_at\_bank\_no       : Factor w/ 2 levels "1","More than 1": 1 1 2 1 1 2 1 1 1 1 {\ldots}
 \$ occupation\_txt           : Factor w/ 1 level "1": 1 1 1 1 1 1 1 1 1 1 {\ldots}
 \$ dependents\_no            : num  2 2 2 2 1 1 2 1 1 1 {\ldots}
 \$ telephone\_txt            : Factor w/ 2 levels "1","2": 1 1 1 1 1 1 1 1 1 1 {\ldots}
 \$ foreign\_worker\_flg       : Factor w/ 2 levels "1","2": 2 2 1 1 1 1 1 1 1 1 {\ldots}

    \end{Verbatim}

    \begin{itemize}
\tightlist
\item
  Removing duration at current address and dependents for missing data.
\item
  Removing occupation\_txt and concurrent\_credits\_txt for lack of
  information (1 value).
\item
  Removing guarantors\_txt, telephone\_txt, and foreign\_worker\_flg due
  to low variablility.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} df.train.raw \PY{o}{\PYZlt{}\PYZhy{}} df.train.raw \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}telephone\PYZus{}txt \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}curr\PYZus{}address\PYZus{}dur\PYZus{}no \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}dependents\PYZus{}no \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}occupation\PYZus{}txt \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}concurrent\PYZus{}credits\PYZus{}txt \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}foreign\PYZus{}worker\PYZus{}flg \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}guarantors\PYZus{}txt \PY{p}{)}
\end{Verbatim}


    \begin{itemize}
\tightlist
\item
  Removing records in the training set having a value of 'Other' due to
  test set not having that value.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} df.train.raw \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{droplevels}\PY{p}{(} filter\PY{p}{(} df.train.raw
                                            \PY{p}{,} df.train.raw\PY{o}{\PYZdl{}}purpose\PYZus{}txt \PY{o}{!=} \PY{l+s}{\PYZsq{}}\PY{l+s}{Other\PYZsq{}} \PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \subsubsection{Checking age value against the course
information}\label{checking-age-value-against-the-course-information}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{k+kp}{round}\PY{p}{(} \PY{k+kp}{mean}\PY{p}{(} df.train.raw\PY{o}{\PYZdl{}}age\PYZus{}no\PY{p}{,} na.rm \PY{o}{=} \PY{k+kc}{TRUE} \PY{p}{)} \PY{p}{)}
\end{Verbatim}


    36

    
    \paragraph{Looks good.}\label{looks-good.}

    \subsection{Step 3: Train classification
models}\label{step-3-train-classification-models}

    \subsubsection{Create training and validation
sets}\label{create-training-and-validation-sets}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}19}]:} \PY{k+kp}{set.seed}\PY{p}{(} \PY{l+m}{1} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}20}]:} train \PY{o}{\PYZlt{}\PYZhy{}} createDataPartition\PY{p}{(} df.train.raw\PY{o}{\PYZdl{}}application\PYZus{}result\PYZus{}txt
                                      \PY{p}{,} times \PY{o}{=} \PY{l+m}{1}
                                      \PY{p}{,} p \PY{o}{=} \PY{l+m}{0.7}
                                      \PY{p}{,} \PY{k+kt}{list} \PY{o}{=} \PY{k+kc}{FALSE} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} df.train \PY{o}{\PYZlt{}\PYZhy{}} df.train.raw\PY{p}{[}train\PY{p}{,}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}22}]:} df.val \PY{o}{\PYZlt{}\PYZhy{}} df.train.raw\PY{p}{[}\PY{o}{\PYZhy{}}train\PY{p}{,}\PY{p}{]}
\end{Verbatim}


    \subsubsection{Logistic regression}\label{logistic-regression}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} fit.glm.full \PY{o}{\PYZlt{}\PYZhy{}} glm\PY{p}{(} application\PYZus{}result\PYZus{}txt
                       \PY{o}{\PYZti{}} \PY{l+m}{.}
                       \PY{p}{,} data \PY{o}{=} df.train
                       \PY{p}{,} family \PY{o}{=} binomial \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{k+kp}{summary}\PY{p}{(} fit.glm.full \PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
glm(formula = application_result_txt ~ ., family = binomial, 
    data = df.train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.2711  -0.7260  -0.4639   0.6474   2.4836  

Coefficients:
                                       Estimate Std. Error z value Pr(>|z|)    
(Intercept)                          -2.678e+00  9.981e-01  -2.683 0.007297 ** 
acct_balance_txtSome Balance         -1.051e+00  3.135e-01  -3.352 0.000804 ***
months_of_credit_no                   1.562e-02  1.419e-02   1.101 0.270850    
prev_payment_status_txtPaid Up        1.029e+00  4.198e-01   2.450 0.014271 *  
prev_payment_status_txtSome Problems  1.760e+00  5.599e-01   3.143 0.001671 ** 
purpose_txtNew car                   -2.295e+00  7.983e-01  -2.875 0.004044 ** 
purpose_txtUsed car                  -4.797e-01  3.954e-01  -1.213 0.225059    
credit_amt_no                         8.827e-05  6.548e-05   1.348 0.177669    
savings_stocks_val_no£100-£1000      -8.139e-02  5.946e-01  -0.137 0.891122    
savings_stocks_val_noNone             7.951e-01  5.234e-01   1.519 0.128758    
curr_employment_length_no1-4 yrs     -6.562e-01  3.958e-01  -1.658 0.097315 .  
curr_employment_length_no4-7 yrs     -2.525e-01  3.910e-01  -0.646 0.518406    
installment_perc_no                   2.081e-01  1.405e-01   1.482 0.138440    
most_val_asset_cd2                    4.741e-01  4.210e-01   1.126 0.260066    
most_val_asset_cd3                    2.014e-01  3.725e-01   0.541 0.588763    
most_val_asset_cd4                    1.533e+00  6.745e-01   2.273 0.023054 *  
age_no                               -1.231e-02  1.472e-02  -0.836 0.403023    
apartment_type_txt2                  -1.112e-01  3.707e-01  -0.300 0.764103    
apartment_type_txt3                  -2.469e-01  8.005e-01  -0.308 0.757758    
credits_at_bank_noMore than 1         6.268e-01  4.032e-01   1.554 0.120080    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 409.06  on 340  degrees of freedom
Residual deviance: 318.70  on 321  degrees of freedom
AIC: 358.7

Number of Fisher Scoring iterations: 5

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} fit.glm.red \PY{o}{\PYZlt{}\PYZhy{}} glm\PY{p}{(} application\PYZus{}result\PYZus{}txt
                       \PY{o}{\PYZti{}} acct\PYZus{}balance\PYZus{}txt
                       \PY{o}{+} prev\PYZus{}payment\PYZus{}status\PYZus{}txt
                         \PY{o}{+} credit\PYZus{}amt\PYZus{}no
                         \PY{o}{+} installment\PYZus{}perc\PYZus{}no
                         \PY{o}{+} most\PYZus{}val\PYZus{}asset\PYZus{}cd
                         \PY{o}{+} curr\PYZus{}employment\PYZus{}length\PYZus{}no
                       \PY{p}{,} data \PY{o}{=} df.train
                       \PY{p}{,} family \PY{o}{=} binomial \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{k+kp}{summary}\PY{p}{(} fit.glm.red \PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
glm(formula = application_result_txt ~ acct_balance_txt + prev_payment_status_txt + 
    credit_amt_no + installment_perc_no + most_val_asset_cd + 
    curr_employment_length_no, family = binomial, data = df.train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.3434  -0.7568  -0.5050   0.8104   2.4257  

Coefficients:
                                       Estimate Std. Error z value Pr(>|z|)    
(Intercept)                          -2.097e+00  5.594e-01  -3.749 0.000178 ***
acct_balance_txtSome Balance         -1.281e+00  2.883e-01  -4.445 8.77e-06 ***
prev_payment_status_txtPaid Up        6.749e-01  2.978e-01   2.266 0.023421 *  
prev_payment_status_txtSome Problems  1.528e+00  4.884e-01   3.128 0.001760 ** 
credit_amt_no                         9.280e-05  4.933e-05   1.881 0.059962 .  
installment_perc_no                   2.725e-01  1.300e-01   2.096 0.036043 *  
most_val_asset_cd2                    3.148e-01  3.969e-01   0.793 0.427722    
most_val_asset_cd3                    1.916e-01  3.497e-01   0.548 0.583729    
most_val_asset_cd4                    1.029e+00  4.409e-01   2.335 0.019540 *  
curr_employment_length_no1-4 yrs     -6.266e-01  3.702e-01  -1.692 0.090573 .  
curr_employment_length_no4-7 yrs     -4.743e-01  3.453e-01  -1.374 0.169588    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 409.06  on 340  degrees of freedom
Residual deviance: 343.94  on 330  degrees of freedom
AIC: 365.94

Number of Fisher Scoring iterations: 4

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(} fit.glm.red
                                \PY{p}{,} df.val
                                \PY{p}{,} type \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{response\PYZsq{}} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}28}]:} df.val\PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{within}\PY{p}{(} df.val\PY{p}{,} \PY{p}{\PYZob{}}
             pred\PY{p}{[}pred \PY{o}{\PYZgt{}=} \PY{l+m}{0.5}\PY{p}{]} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{Creditworthy\PYZsq{}}
             pred\PY{p}{[}pred\PY{o}{\PYZlt{}} \PY{l+m}{0.5}\PY{p}{]} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{Non\PYZhy{}Creditworthy\PYZsq{}}
         \PY{p}{\PYZcb{}}\PY{p}{)}
         df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{factor}\PY{p}{(} df.val\PY{o}{\PYZdl{}}pred \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}29}]:} lr.cm \PY{o}{\PYZlt{}\PYZhy{}} confusionMatrix\PY{p}{(} df.val\PY{o}{\PYZdl{}}application\PYZus{}result\PYZus{}txt
                         \PY{p}{,} df.val\PY{o}{\PYZdl{}}pred \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} lr.cm\PY{o}{\PYZdl{}}overall\PY{p}{[}\PY{l+m}{1}\PY{p}{]}
\end{Verbatim}


    \textbf{Accuracy:} 0.229166666666667

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} lr.cm\PY{o}{\PYZdl{}}\PY{k+kp}{table}
\end{Verbatim}


    
    \begin{verbatim}
                  Reference
Prediction         Creditworthy Non-Creditworthy
  Creditworthy                8               95
  Non-Creditworthy           16               25
    \end{verbatim}

    
    \subsubsection{Decision tree model}\label{decision-tree-model}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}32}]:} fit.dt \PY{o}{\PYZlt{}\PYZhy{}} rpart\PY{p}{(} application\PYZus{}result\PYZus{}txt 
              \PY{o}{\PYZti{}} \PY{l+m}{.}
              \PY{p}{,} data \PY{o}{=} df.train \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} rpart.plot\PY{p}{(} fit.dt \PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_55_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(} fit.dt
                \PY{p}{,} df.val
                \PY{p}{,} type \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{class\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} dt.cm \PY{o}{\PYZlt{}\PYZhy{}} confusionMatrix\PY{p}{(} df.val\PY{o}{\PYZdl{}}application\PYZus{}result\PYZus{}txt
                        \PY{p}{,} df.val\PY{o}{\PYZdl{}}pred \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} dt.cm\PY{o}{\PYZdl{}}overall\PY{p}{[}\PY{l+m}{1}\PY{p}{]}
\end{Verbatim}


    \textbf{Accuracy:} 0.743055555555556

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} dt.cm\PY{o}{\PYZdl{}}\PY{k+kp}{table}
\end{Verbatim}


    
    \begin{verbatim}
                  Reference
Prediction         Creditworthy Non-Creditworthy
  Creditworthy               92               11
  Non-Creditworthy           26               15
    \end{verbatim}

    
    \subsubsection{Random forest model}\label{random-forest-model}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} fit.rf \PY{o}{\PYZlt{}\PYZhy{}} randomForest\PY{p}{(} application\PYZus{}result\PYZus{}txt
                     \PY{o}{\PYZti{}} \PY{l+m}{.}
                     \PY{p}{,} data \PY{o}{=} df.train \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(} fit.rf
                \PY{p}{,} df.val \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} rf.cm \PY{o}{\PYZlt{}\PYZhy{}} confusionMatrix\PY{p}{(} df.val\PY{o}{\PYZdl{}}application\PYZus{}result\PYZus{}txt
                        \PY{p}{,} df.val\PY{o}{\PYZdl{}}pred \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} rf.cm\PY{o}{\PYZdl{}}overall\PY{p}{[}\PY{l+m}{1}\PY{p}{]}
\end{Verbatim}


    \textbf{Accuracy:} 0.763888888888889

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} rf.cm\PY{o}{\PYZdl{}}\PY{k+kp}{table}
\end{Verbatim}


    
    \begin{verbatim}
                  Reference
Prediction         Creditworthy Non-Creditworthy
  Creditworthy               96                7
  Non-Creditworthy           27               14
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}43}]:} varImpPlot\PY{p}{(} fit.rf \PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_66_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsubsection{Boosted tree model}\label{boosted-tree-model}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}44}]:} fit.bm \PY{o}{\PYZlt{}\PYZhy{}} gbm\PY{p}{(} \PY{k+kp}{as.numeric}\PY{p}{(} application\PYZus{}result\PYZus{}txt \PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m}{1}
                      \PY{o}{\PYZti{}} \PY{l+m}{.}
                      \PY{p}{,} data \PY{o}{=} df.train
                      \PY{p}{,} distribution \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{bernoulli\PYZsq{}}
                      \PY{p}{,} n.trees \PY{o}{=} \PY{l+m}{70}
                      \PY{p}{,} interaction.depth \PY{o}{=} \PY{l+m}{5}
                      \PY{p}{,} shrinkage \PY{o}{=} \PY{l+m}{0.3}
                      \PY{p}{,} bag.fraction \PY{o}{=} \PY{l+m}{0.5}
                      \PY{p}{,} train.fraction \PY{o}{=} \PY{l+m}{1.0}
                      \PY{p}{,} n.cores \PY{o}{=} \PY{k+kc}{NULL}\PY{p}{)}  \PY{c+c1}{\PYZsh{}will use all cores by default}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}45}]:} df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} predict.gbm\PY{p}{(} fit.bm
                \PY{p}{,} df.val
                \PY{p}{,} n.trees \PY{o}{=} \PY{l+m}{70}
                \PY{p}{,} type \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{response\PYZsq{}} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} df.val\PY{o}{\PYZdl{}}bm.pred \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{as.numeric}\PY{p}{(} df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZgt{}=} \PY{l+m}{0.4} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}47}]:} df.val \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{within}\PY{p}{(} df.val\PY{p}{,} \PY{p}{\PYZob{}}
             pred\PY{p}{[}bm.pred \PY{o}{==} \PY{l+m}{1}\PY{p}{]} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{Non\PYZhy{}creditworthy\PYZsq{}}
             pred\PY{p}{[}bm.pred \PY{o}{==} \PY{l+m}{0}\PY{p}{]} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{Creditworthy\PYZsq{}}
         \PY{p}{\PYZcb{}}\PY{p}{)}
         df.val\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{factor}\PY{p}{(} df.val\PY{o}{\PYZdl{}}pred \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}48}]:} \PY{k+kp}{summary}\PY{p}{(} fit.bm \PY{p}{)}
\end{Verbatim}


    \begin{tabular}{r|ll}
  & var & rel.inf\\
\hline
	credit\_amt\_no & credit\_amt\_no             & 24.602945                    \\
	age\_no & age\_no                    & 16.527278                  \\
	months\_of\_credit\_no & months\_of\_credit\_no       & 11.792256                      \\
	prev\_payment\_status\_txt & prev\_payment\_status\_txt   & 10.642748                      \\
	most\_val\_asset\_cd & most\_val\_asset\_cd         &  8.708885                      \\
	acct\_balance\_txt & acct\_balance\_txt          &  6.762428                    \\
	savings\_stocks\_val\_no & savings\_stocks\_val\_no     &  5.136584                      \\
	installment\_perc\_no & installment\_perc\_no       &  4.077825                    \\
	purpose\_txt & purpose\_txt               &  3.960384                  \\
	curr\_employment\_length\_no & curr\_employment\_length\_no &  3.376761                      \\
	apartment\_type\_txt & apartment\_type\_txt        &  2.665703                    \\
	credits\_at\_bank\_no & credits\_at\_bank\_no        &  1.746203                      \\
\end{tabular}


    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_72_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}49}]:} cm \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{cbind}\PY{p}{(}df.val\PY{o}{\PYZdl{}}application\PYZus{}result\PYZus{}txt\PY{p}{,} df.val\PY{o}{\PYZdl{}}pred\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}50}]:} bm.cm \PY{o}{\PYZlt{}\PYZhy{}} confusionMatrix\PY{p}{(} cm\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} cm\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}51}]:} bm.cm\PY{o}{\PYZdl{}}overall\PY{p}{[}\PY{l+m}{1}\PY{p}{]}
\end{Verbatim}


    \textbf{Accuracy:} 0.708333333333333

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}52}]:} bm.cm\PY{o}{\PYZdl{}}\PY{k+kp}{table}
\end{Verbatim}


    
    \begin{verbatim}
          Reference
Prediction  1  2
         1 80 23
         2 19 22
    \end{verbatim}

    
    \subsubsection{Compare the accuracy of the four
models}\label{compare-the-accuracy-of-the-four-models}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}53}]:} ac.log \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZsq{}}\PY{l+s}{Logistic regression\PYZsq{}}\PY{p}{,} \PY{l+m}{0.2292} \PY{p}{)}
         ac.dt \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZsq{}}\PY{l+s}{Decision tree\PYZsq{}}\PY{p}{,} \PY{l+m}{0.7431} \PY{p}{)}
         ac.rf \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZsq{}}\PY{l+s}{Random forest\PYZsq{}}\PY{p}{,} \PY{l+m}{0.7639} \PY{p}{)}
         ac.bm \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(} \PY{l+s}{\PYZsq{}}\PY{l+s}{Gradient boosted model\PYZsq{}}\PY{p}{,} \PY{l+m}{0.7083} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}54}]:} ac.tbl \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{rbind}\PY{p}{(} ac.log
              \PY{p}{,} ac.dt
              \PY{p}{,} ac.rf
              \PY{p}{,} ac.bm \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}55}]:} ac.tbl
\end{Verbatim}


    \begin{tabular}{r|ll}
	ac.log & Logistic regression    & 0.2292                \\
	ac.dt & Decision tree          & 0.7431                \\
	ac.rf & Random forest          & 0.7639                \\
	ac.bm & Gradient boosted model & 0.7083                \\
\end{tabular}


    
    The random forest model appears to be the most accurate from a
comparison of the confusion matrices.

    \subsubsection{Which predictor variables are significant or the most
important?}\label{which-predictor-variables-are-significant-or-the-most-important}

    For the logistic regression model, the following variables were
significant: - Account balance - Previous payment status - Purpose -
Credit amount - Installment percent - Most valuable asset

For the decision tree model, the following variables were important: -
Account balance - Months of credit - Installment percent - Previous
payment status

For the random forest, the following variables were important: - Credit
amount - Months of credit - Age

For the boosted model, the following variables were important: - Credit
amount - Months of credit - Age

    \subsubsection{What was the overall percent accuracy? Show the confusion
matrix. Are there any biases seen in the model's
predictions?}\label{what-was-the-overall-percent-accuracy-show-the-confusion-matrix.-are-there-any-biases-seen-in-the-models-predictions}

For all models, see the confusion matrices above. - For the logistic
regression model, overall accuracy was 23\%. There is bias in this model
with positive accuarcy of 33\% and negative accuarcy of 21\%. - For the
decision tree model, overall accuracy was 73\%. There is bias in this
model with positive prediction being 78\% and negative accuracy at 58\%.
- For the random forest model, overall accuracy was 78\%. There is bias
in this model with positive prediction at 79\% and negative prediction
at 65\%. - For the gradient boosted model, the overall accuracy was
72\%. There is bias in this model with positive accuarcy of 81\% and
negative accurcacy of

    \subsection{Report}\label{report}

    Random forest has the highest accuracy at 76\%. I will use this model to
score the new customers.

    \subsubsection{Score the new data}\label{score-the-new-data}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}56}]:} df.test.raw \PY{o}{\PYZlt{}\PYZhy{}} df.test.raw \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}curr\PYZus{}address\PYZus{}dur\PYZus{}no \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}occupation\PYZus{}txt \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}concurrent\PYZus{}credits\PYZus{}txt \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}guarantors\PYZus{}txt \PY{p}{)} \PY{o}{\PYZpc{}\PYZgt{}\PYZpc{}}
             select\PY{p}{(} \PY{o}{\PYZhy{}}foreign\PYZus{}worker\PYZus{}flg \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}60}]:} df.train\PY{o}{\PYZdl{}}months\PYZus{}of\PYZus{}credit\PYZus{}no \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{as.numeric}\PY{p}{(} df.train\PY{o}{\PYZdl{}}months\PYZus{}of\PYZus{}credit\PYZus{}no \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}prev\PYZus{}payment\PYZus{}status\PYZus{}txt \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{factor}\PY{p}{(} df.train\PY{o}{\PYZdl{}}prev\PYZus{}payment\PYZus{}status\PYZus{}txt \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}credit\PYZus{}amt\PYZus{}no \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{as.numeric}\PY{p}{(} df.train\PY{o}{\PYZdl{}}credit\PYZus{}amt\PYZus{}no \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}savings\PYZus{}stocks\PYZus{}val\PYZus{}no \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{factor}\PY{p}{(} df.train\PY{o}{\PYZdl{}}savings\PYZus{}stocks\PYZus{}val\PYZus{}no \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}installment\PYZus{}perc\PYZus{}no \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{as.numeric}\PY{p}{(} df.train\PY{o}{\PYZdl{}}installment\PYZus{}perc\PYZus{}no \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}most\PYZus{}val\PYZus{}asset\PYZus{}cd \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{factor}\PY{p}{(} df.train\PY{o}{\PYZdl{}}most\PYZus{}val\PYZus{}asset\PYZus{}cd \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}age\PYZus{}no \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{as.numeric}\PY{p}{(} df.train\PY{o}{\PYZdl{}}age\PYZus{}no \PY{p}{)}
         df.train\PY{o}{\PYZdl{}}apartment\PYZus{}type\PYZus{}txt \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{factor}\PY{p}{(} df.train\PY{o}{\PYZdl{}}apartment\PYZus{}type\PYZus{}txt \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}61}]:} df.test.raw\PY{o}{\PYZdl{}}pred \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(} fit.rf\PY{p}{,} newdata \PY{o}{=} df.test.raw \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}62}]:} \PY{k+kp}{table}\PY{p}{(} df.test.raw\PY{o}{\PYZdl{}}pred \PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

    Creditworthy Non-Creditworthy 
             417               83 
    \end{verbatim}

    
    \subsection{Write-up}\label{write-up}

    To come up with this prediction, I split the training data into train
and validation sets and ran four classification models on the train
data. I then ran a comparison of all models on validation sets with an
emphasis on accuracy (per requirements), and scored new customers with
the most accurate model, the random forest.

This model had a 78\% accuracy against the validation set. Creditowrthy
accuracy was 79\%. Non-creditworthy accuracy was 71\%.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}63}]:} pred.prob \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(}fit.rf\PY{p}{,} df.val\PY{p}{,} type\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{prob\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}64}]:} df.val \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{cbind}\PY{p}{(} df.val\PY{p}{,} pred.prob \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}65}]:} roc.rf \PY{o}{\PYZlt{}\PYZhy{}} roc\PY{p}{(}df.val\PY{o}{\PYZdl{}}application\PYZus{}result\PYZus{}txt\PY{p}{,} df.val\PY{o}{\PYZdl{}}Creditworthy \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}66}]:} plot\PY{p}{(}roc.rf\PY{p}{,} print.thres\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{best\PYZdq{}}\PY{p}{,} print.thres.best.method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{closest.topleft\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_97_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsection{Conclusion}\label{conclusion}

I predict that 417 new customers will be deemed creditworthy.


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
